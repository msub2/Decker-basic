{"id":"c3368ecf-01d3-492a-bc20-d6cea68789f5","name":"Decker","graph":{"id":"demo@0.1.0","nodes":{"232":{"id":232,"data":{"name":"input","text":"Hello Decker, how are you?","display":"Hello Decker, how are you?","outputs":[],"success":false,"socketKey":"9d61118c-3c5a-4379-9dae-41965e56207f","dataControls":{"name":{"expanded":true},"playtestToggle":{"expanded":true},"useDefault":{"expanded":true}},"defaultValue":"","playtestToggle":{"receivePlaytest":true}},"inputs":{},"outputs":{"output":{"connections":[{"node":244,"input":"agent","data":{}}]}},"position":[-1915.6918065148775,-276.47374567804593],"name":"Universal Input"},"233":{"id":233,"data":{"name":"output-233","display":"Doing alright, Traveler. The city's been a bit quiet today, but I'm sure it'll pick up soon enough.","success":false,"socketKey":"7b5f2740-975c-4f66-a2dc-97e8ca0e8ab7","dataControls":{"name":{"expanded":true},"sendToAvatar":{"expanded":true},"sendToPlaytest":{"expanded":true}},"sendToPlaytest":true,"error":false},"inputs":{"input":{"connections":[{"node":7236,"output":"output","data":{}}]},"trigger":{"connections":[{"node":7236,"output":"trigger","data":{}}]}},"outputs":{"trigger":{"connections":[{"node":7282,"input":"trigger","data":{}}]}},"position":[778.0171993032956,-497.2205581612699],"name":"Output"},"234":{"id":234,"data":{"name":"input-234","text":"Hello Decker, how are you?","socketKey":"5655d7a3-ae23-47cf-8e46-6e320faaa3cb","defaultValue":"Input text here","playtestToggle":{"receivePlaytest":true}},"inputs":{},"outputs":{"output":{"connections":[]}},"position":[778,-2713],"name":"Universal Input"},"241":{"id":241,"data":{"name":"output-241","socketKey":"9284b89d-7344-4bda-a53a-be99a0e09704","dataControls":{"name":{"expanded":true},"sendToPlaytest":{"expanded":true}},"sendToPlaytest":true},"inputs":{"input":{"connections":[]},"trigger":{"connections":[]}},"outputs":{"trigger":{"connections":[]}},"position":[1938.157981182951,-2705.5348921703153],"name":"Output"},"242":{"id":242,"data":{"name":"History","fewshot":"The Unseen City is a nexus point of lost places. The only way to reach it is by slipping out of one's home reality into The In-Between. The In-Between is the fabric that holds together lost and forgotten places, some of which were lost and forgotten for a reason. Residents of The Unseen City hail from any number of realms, both forgotten and not. The structure of The Unseen City is cyclic, but unbounded; the streets themselves have no end, but wander long enough without a destination in mind and you just might find yourself back where you began.","success":false,"dataControls":{"name":{"expanded":true},"fewshot":{"expanded":true}}},"inputs":{},"outputs":{"output":{"connections":[{"node":248,"input":"history","data":{}}]}},"position":[-1624.3426798668083,-965.2579813496595],"name":"Fewshot Variable"},"244":{"id":244,"data":{"display":"Hello Decker, how are you?","success":false,"socketKey":"7e079087-eaf9-4c47-a797-e9cdd802e195"},"inputs":{"trigger":{"connections":[{"node":7028,"output":"trigger","data":{}}]},"agent":{"connections":[{"node":232,"output":"output","data":{}}]}},"outputs":{"speaker":{"connections":[]},"agent":{"connections":[]},"client":{"connections":[]},"channel":{"connections":[]},"channelId":{"connections":[]},"entity":{"connections":[]},"roomInfo":{"connections":[]},"channelType":{"connections":[]},"eth_private_key":{"connections":[]},"eth_public_address":{"connections":[]},"output":{"connections":[{"node":250,"input":"input","data":{}}]},"trigger":{"connections":[{"node":248,"input":"trigger","data":{}}]}},"position":[-1489.1343640399914,-401.2387363765556],"name":"Input Destructure"},"245":{"id":245,"data":{"stop":"###","topP":"1.0","error":false,"success":false,"maxTokens":"256","modelName":"text-davinci-003","temperature":".6","dataControls":{"stop":{"expanded":true},"topP":{"expanded":true},"maxTokens":{"expanded":true},"modelName":{"expanded":true},"temperature":{"expanded":true},"presencePenalty":{"expanded":true},"frequencyPenalty":{"expanded":true}},"presencePenalty":".3","frequencyPenalty":".3"},"inputs":{"string":{"connections":[{"node":250,"output":"output","data":{}}]},"settings":{"connections":[]},"trigger":{"connections":[{"node":250,"output":"trigger","data":{}}]}},"outputs":{"trigger":{"connections":[{"node":7236,"input":"trigger","data":{}}]},"output":{"connections":[{"node":7236,"input":"response","data":{}}]}},"position":[-150.01139823221965,-511.35621425298973],"name":"Agent Text Completion"},"246":{"id":246,"data":{"name":"Decker Bio","fewshot":"Decker is the owner and proprietor of Xanthum's Den, one of the countless bars in The Unseen City. Though he does not age, much like the rest of the city's inhabitants, he appears to be in his mid 30s. He has a tall and strong build, with a tanned complexion and short, silver hair. He is one of the few residents of The Unseen City that has spoken with the All-Seer and learned that he is a narraative construct, but despite this he still seems perfectly content to continue managing his bar and speaking with the customers that come through.","success":false,"dataControls":{"name":{"expanded":true},"fewshot":{"expanded":true}}},"inputs":{},"outputs":{"output":{"connections":[{"node":248,"input":"bio","data":{}}]}},"position":[-1622.5970130881428,-789.0223244385721],"name":"Fewshot Variable"},"248":{"id":248,"data":{"code":"\n// inputs: dictionary of inputs based on socket names\n// data: internal data of the node to read or write to nodes data state\n// state: access to the current game state in the state manager window. Return state to update the state.\nfunction worker({\n  history,\n  bio,\n  input,\n  prompt\n}, data, state) {\n  // Keys of the object returned must match the names \n  // of your outputs you defined.\n  // To update the state, you must return the modified state.\n  let output = `${history}\n  ${bio}\n  ${prompt}\n  `;\n\n  return { output }\n}\n","name":"Inject Context","inputs":[{"name":"history","taskType":"output","socketKey":"history","socketType":"anySocket","connectionType":"input"},{"name":"bio","taskType":"output","socketKey":"bio","socketType":"anySocket","connectionType":"input"},{"name":"prompt","taskType":"output","socketKey":"prompt","socketType":"anySocket","connectionType":"input"}],"outputs":[{"name":"output","taskType":"output","socketKey":"output","socketType":"anySocket","connectionType":"output"}],"success":false,"dataControls":{"code":{"expanded":true},"name":{"expanded":true},"inputs":{"expanded":true},"outputs":{"expanded":true}},"Input Socketsinputs":[{"name":"history","taskType":"output","socketKey":"history","socketType":"anySocket","connectionType":"input"},{"name":"bio","taskType":"output","socketKey":"bio","socketType":"anySocket","connectionType":"input"},{"name":"input","taskType":"output","socketKey":"input","socketType":"anySocket","connectionType":"input"}],"Output Socketsoutputs":[{"name":"output","taskType":"output","socketKey":"output","socketType":"anySocket","connectionType":"output"}]},"inputs":{"history":{"connections":[{"node":242,"output":"output","data":{}}]},"bio":{"connections":[{"node":246,"output":"output","data":{}}]},"prompt":{"connections":[{"node":249,"output":"output","data":{}}]},"trigger":{"connections":[{"node":244,"output":"trigger","data":{}}]}},"outputs":{"output":{"connections":[{"node":250,"input":"payload","data":{}}]},"trigger":{"connections":[{"node":250,"input":"trigger","data":{}}]}},"position":[-1062.8867628775592,-510.87907462657716],"name":"Code"},"249":{"id":249,"data":{"name":"Prompt","fewshot":"The following are examples of conversations between #speaker and #agent. (Conversations are split by ###)\n#speaker: Where am I?\n#agent: You're in the best bar in The Unseen City, Xanthum's Den. I've been running this place as long as I can remember.\n###\n#speaker: Can I get a drink?\n#agent: Sure thing. We're stocked up with pretty much anything you could think of, including some spirits you may not have been privy to back in your own realm.\n###\n#speaker: #input","success":false,"dataControls":{"name":{"expanded":true},"fewshot":{"expanded":true}}},"inputs":{},"outputs":{"output":{"connections":[{"node":248,"input":"prompt","data":{}}]}},"position":[-1622.8019750100907,-610.8042535407332],"name":"Fewshot Variable"},"250":{"id":250,"data":{"code":"\n// inputs: dictionary of inputs based on socket names\n// data: internal data of the node to read or write to nodes data state\n// state: access to the current game state in the state manager window. Return state to update the state.\nfunction worker({\n  payload,\n  speaker,\n  agent,\n  input\n}, data, state) {\n  // Keys of the object returned must match the names \n  // of your outputs you defined.\n  // To update the state, you must return the modified state.\n\n  let output = payload.replaceAll('#speaker', speaker)\n                .replaceAll('#agent', agent)\n                .replaceAll('#input', input);\n  return { output }\n}\n","name":"Substitute Vars","inputs":[{"name":"payload","taskType":"output","socketKey":"payload","socketType":"anySocket","connectionType":"input"},{"name":"speaker","taskType":"output","socketKey":"speaker","socketType":"anySocket","connectionType":"input"},{"name":"agent","taskType":"output","socketKey":"agent","socketType":"anySocket","connectionType":"input"},{"name":"input","taskType":"output","socketKey":"input","socketType":"anySocket","connectionType":"input"}],"outputs":[{"name":"output","taskType":"output","socketKey":"output","socketType":"anySocket","connectionType":"output"}],"success":false,"dataControls":{"code":{"expanded":true},"name":{"expanded":true},"inputs":{"expanded":true},"outputs":{"expanded":true}}},"inputs":{"payload":{"connections":[{"node":248,"output":"output","data":{}}]},"speaker":{"connections":[{"node":251,"output":"output","data":{}}]},"agent":{"connections":[{"node":252,"output":"output","data":{}}]},"input":{"connections":[{"node":244,"output":"output","data":{}}]},"trigger":{"connections":[{"node":248,"output":"trigger","data":{}}]}},"outputs":{"output":{"connections":[{"node":245,"input":"string","data":{}}]},"trigger":{"connections":[{"node":245,"input":"trigger","data":{}}]}},"position":[-676.0909282193737,-506.5665073955581],"name":"Code"},"251":{"id":251,"data":{"_var":"Traveler","name":"Speaker","success":false,"dataControls":{"_var":{"expanded":true},"name":{"expanded":true}}},"inputs":{},"outputs":{"output":{"connections":[{"node":250,"input":"speaker","data":{}}]}},"position":[-1066.6036388147993,-844.0287547404388],"name":"String Variable"},"252":{"id":252,"data":{"_var":"Decker","name":"Agent","success":false,"dataControls":{"_var":{"expanded":true},"name":{"expanded":true}}},"inputs":{},"outputs":{"output":{"connections":[{"node":250,"input":"agent","data":{}}]}},"position":[-1065.1267226342438,-673.8408214147577],"name":"String Variable"},"7028":{"id":7028,"data":{"socketKey":"e4599098-185e-4ead-893a-dd6f6400a6b9","playtestToggle":{"receivePlaytest":true},"success":false},"inputs":{},"outputs":{"trigger":{"connections":[{"node":244,"input":"trigger","data":{}}]}},"position":[-1914.5192369870101,-408.01894341911174],"name":"Trigger In"},"7236":{"id":7236,"data":{"code":"\n// inputs: dictionary of inputs based on socket names\n// data: internal data of the node to read or write to nodes data state\n// state: access to the current game state in the state manager window. Return state to update the state.\nfunction worker({ response }, data, state) {\n  // Keys of the object returned must match the names\n  // of your outputs you defined.\n  // To update the state, you must return the modified state.\n\n  let strippedResponse = response.split(': ');\n  if (strippedResponse[1]) {\n    return { output: strippedResponse[1] }\n  }\n\n  return { output: response }\n}\n","dataControls":{"name":{"expanded":true},"inputs":{"expanded":true},"outputs":{"expanded":true},"code":{"expanded":true}},"inputs":[{"name":"response","taskType":"output","socketKey":"response","connectionType":"input","socketType":"anySocket"}],"outputs":[{"name":"output","taskType":"output","socketKey":"output","connectionType":"output","socketType":"anySocket"}],"name":"Strip Agent Name","success":false},"inputs":{"response":{"connections":[{"node":245,"output":"output","data":{}}]},"trigger":{"connections":[{"node":245,"output":"trigger","data":{}}]}},"outputs":{"output":{"connections":[{"node":233,"input":"input","data":{}}]},"trigger":{"connections":[{"node":233,"input":"trigger","data":{}}]}},"position":[367.1606209159128,-493.3436214089276],"name":"Code"},"7282":{"id":7282,"data":{"name":"trigger-out-7282","socketKey":"e9576035-f5f5-4864-ace3-89049103d934","success":false},"inputs":{"trigger":{"connections":[{"node":233,"output":"trigger","data":{}}]}},"outputs":{},"position":[1185.830361299151,-496.0025113043349],"name":"Trigger Out"}},"comments":[]},"created_at":null,"updated_at":null,"deleted_at":null,"modules":[],"gameState":{}}
